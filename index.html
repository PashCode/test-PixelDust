<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #f0f0f0;
            margin: 0;
            overflow: hidden;
        }
        .shatter-container {
            position: relative;
            width: 500px;
            height: 500px;
            cursor: pointer;
        }
        .shatter-piece {
            position: absolute;
            background-size: 500px 500px;
            transition: all .3s ease-out;
        }
    </style>
</head>
<body>
<div class="shatter-container">
    <img src="hidden-card.jpg" id="sourceImage" style="display:none;">
</div>

<script>
    const container = document.querySelector('.shatter-container');
    const sourceImage = document.getElementById('sourceImage');
    let isShattered = false;
    let pieces = [];

    function createShatterPieces() {
        container.innerHTML = '';
        const cols = 5;
        const rows = 5;
        const width = 500;
        const height = 500;

        pieces = [];
        for (let row = 0; row < rows; row++) {
            for (let col = 0; col < cols; col++) {
                const piece = document.createElement('div');
                piece.classList.add('shatter-piece');

                piece.style.width = `${width / cols}px`;
                piece.style.height = `${height / rows}px`;
                piece.style.backgroundImage = `url(${sourceImage.src})`;
                piece.style.backgroundPosition = `-${col * (width / cols)}px -${row * (height / rows)}px`;

                piece.style.left = `${col * (width / cols)}px`;
                piece.style.top = `${row * (height / rows)}px`;

                pieces.push({
                    element: piece,
                    originalLeft: `${col * (width / cols)}px`,
                    originalTop: `${row * (height / rows)}px`
                });

                container.appendChild(piece);
            }
        }
    }

    sourceImage.onload = createShatterPieces;

    container.addEventListener('click', () => {
        if (!isShattered) {
            pieces.forEach((piece, index) => {
                const centerX = 250;
                const centerY = 150;
                const pieceX = parseInt(piece.originalLeft);
                const pieceY = parseInt(piece.originalTop);

                const angle = Math.atan2(pieceY - centerY, pieceX - centerX);
                const distance = Math.random() * 300 + 200;

                const translateX = Math.cos(angle) * distance;
                const translateY = Math.sin(angle) * distance;

                piece.element.style.transform = `translate(${translateX}px, ${translateY}px)`;
                piece.element.style.opacity = '0';
            });

            setTimeout(() => {
                pieces.forEach(piece => piece.element.remove());
                pieces = [];
            }, 400);
        } else {
            createShatterPieces();
            pieces.forEach((piece, index) => {
                const centerX = 250;
                const centerY = 150;
                const pieceX = parseInt(piece.originalLeft);
                const pieceY = parseInt(piece.originalTop);

                const angle = Math.atan2(pieceY - centerY, pieceX - centerX);
                const distance = Math.random() * 300 + 200;

                const translateX = Math.cos(angle) * distance;
                const translateY = Math.sin(angle) * distance;

                piece.element.style.transform = `translate(${translateX}px, ${translateY}px)`;
                piece.element.style.opacity = '0';
            });

            setTimeout(() => {
                pieces.forEach((piece, index) => {
                    piece.element.style.transform = 'translate(0, 0)';
                    piece.element.style.opacity = '1';
                });
            }, 50);
        }

        isShattered = !isShattered;
    });
</script>
</body>
</html>